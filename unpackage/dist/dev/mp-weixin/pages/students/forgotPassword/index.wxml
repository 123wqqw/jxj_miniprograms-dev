<view class="forgot-password-container data-v-7f007ccf"><view class="top-background data-v-7f007ccf"><image class="background-image data-v-7f007ccf" src="/static/images/students/bgimage.png" mode="aspectFill"></image></view><view class="status-bar data-v-7f007ccf" style="{{'height:'+(statusBarHeight+'px')+';'}}"></view><view class="forgot-password-form-container data-v-7f007ccf"><view class="logo-section data-v-7f007ccf"><image class="logo-image data-v-7f007ccf" src="/static/images/students/logo.png" mode="aspectFit"></image><view class="app-title data-v-7f007ccf">校体云</view></view><view class="step-indicator data-v-7f007ccf"><view class="{{['step-item','data-v-7f007ccf',(currentStep>=1)?'active':'',(currentStep>1)?'completed':'']}}"><view class="step-number data-v-7f007ccf">1</view><view class="step-text data-v-7f007ccf">输入学籍号</view></view><view class="{{['step-line','data-v-7f007ccf',(currentStep>1)?'active':'']}}"></view><view class="{{['step-item','data-v-7f007ccf',(currentStep>=2)?'active':'',(currentStep>2)?'completed':'']}}"><view class="step-number data-v-7f007ccf">2</view><view class="step-text data-v-7f007ccf">验证身份</view></view><view class="{{['step-line','data-v-7f007ccf',(currentStep>2)?'active':'']}}"></view><view class="{{['step-item','data-v-7f007ccf',(currentStep>=3)?'active':'']}}"><view class="step-number data-v-7f007ccf">3</view><view class="step-text data-v-7f007ccf">重置密码</view></view></view><view class="forgot-password-form data-v-7f007ccf"><block wx:if="{{currentStep===1}}"><view class="form-step data-v-7f007ccf"><view class="step-title data-v-7f007ccf">忘记密码</view><view class="step-desc data-v-7f007ccf">请输入您的学籍号，我们将验证您的身份信息</view><view class="input-group data-v-7f007ccf"><view class="input-label data-v-7f007ccf">学籍号</view><view class="input-wrapper data-v-7f007ccf"><input class="{{['input-field','data-v-7f007ccf',(errors.studentId)?'error':'']}}" placeholder="请输入学籍号" data-event-opts="{{[['input',[['__set_model',['$0','studentId','$event',[]],['formData']],['clearError',['studentId']]]]]}}" value="{{formData.studentId}}" bindinput="__e"/></view><block wx:if="{{errors.studentId}}"><view class="error-message data-v-7f007ccf">{{errors.studentId}}</view></block></view><view data-event-opts="{{[['tap',[['verifyStudentId',['$event']]]]]}}" class="{{['next-button','data-v-7f007ccf',(isVerifying)?'disabled':'']}}" bindtap="__e"><text class="next-button-text data-v-7f007ccf">{{isVerifying?'验证中...':'下一步'}}</text></view></view></block><block wx:if="{{currentStep===2}}"><view class="form-step data-v-7f007ccf"><view class="step-title data-v-7f007ccf">验证身份</view><view class="step-desc data-v-7f007ccf">请输入您的手机号，我们将发送验证码</view><view class="input-group data-v-7f007ccf"><view class="input-label data-v-7f007ccf">手机号</view><view class="input-wrapper data-v-7f007ccf"><input class="{{['input-field','data-v-7f007ccf',(errors.phone)?'error':'']}}" placeholder="请输入手机号" type="number" data-event-opts="{{[['input',[['__set_model',['$0','phone','$event',[]],['formData']],['clearError',['phone']]]]]}}" value="{{formData.phone}}" bindinput="__e"/></view><block wx:if="{{errors.phone}}"><view class="error-message data-v-7f007ccf">{{errors.phone}}</view></block></view><view class="input-group data-v-7f007ccf"><view class="input-label data-v-7f007ccf">验证码</view><view class="input-wrapper verification-wrapper data-v-7f007ccf"><input class="{{['input-field','verification-input','data-v-7f007ccf',(errors.verificationCode)?'error':'']}}" placeholder="请输入验证码" type="number" data-event-opts="{{[['input',[['__set_model',['$0','verificationCode','$event',[]],['formData']],['clearError',['verificationCode']]]]]}}" value="{{formData.verificationCode}}" bindinput="__e"/><view data-event-opts="{{[['tap',[['sendVerificationCode',['$event']]]]]}}" class="{{['verification-btn','data-v-7f007ccf',(!canSendCode)?'disabled':'']}}" bindtap="__e"><text class="verification-btn-text data-v-7f007ccf">{{codeButtonText}}</text></view></view><block wx:if="{{errors.verificationCode}}"><view class="error-message data-v-7f007ccf">{{errors.verificationCode}}</view></block></view><view class="button-group data-v-7f007ccf"><view data-event-opts="{{[['tap',[['prevStep',['$event']]]]]}}" class="prev-button data-v-7f007ccf" bindtap="__e"><text class="prev-button-text data-v-7f007ccf">上一步</text></view><view data-event-opts="{{[['tap',[['verifyPhone',['$event']]]]]}}" class="{{['next-button','data-v-7f007ccf',(isVerifying)?'disabled':'']}}" bindtap="__e"><text class="next-button-text data-v-7f007ccf">{{isVerifying?'验证中...':'下一步'}}</text></view></view></view></block><block wx:if="{{currentStep===3}}"><view class="form-step data-v-7f007ccf"><view class="step-title data-v-7f007ccf">重置密码</view><view class="step-desc data-v-7f007ccf">请设置您的新密码</view><view class="input-group data-v-7f007ccf"><view class="input-label data-v-7f007ccf">新密码</view><view class="input-wrapper data-v-7f007ccf"><input class="{{['input-field','data-v-7f007ccf',(errors.newPassword)?'error':'']}}" placeholder="请输入8-18位新密码" password="{{true}}" data-event-opts="{{[['input',[['__set_model',['$0','newPassword','$event',[]],['formData']],['clearError',['newPassword']]]]]}}" value="{{formData.newPassword}}" bindinput="__e"/></view><block wx:if="{{errors.newPassword}}"><view class="error-message data-v-7f007ccf">{{errors.newPassword}}</view></block></view><view class="input-group data-v-7f007ccf"><view class="input-label data-v-7f007ccf">确认新密码</view><view class="input-wrapper data-v-7f007ccf"><input class="{{['input-field','data-v-7f007ccf',(errors.confirmPassword)?'error':'']}}" placeholder="请再次输入新密码" password="{{true}}" data-event-opts="{{[['input',[['__set_model',['$0','confirmPassword','$event',[]],['formData']],['clearError',['confirmPassword']]]]]}}" value="{{formData.confirmPassword}}" bindinput="__e"/></view><block wx:if="{{errors.confirmPassword}}"><view class="error-message data-v-7f007ccf">{{errors.confirmPassword}}</view></block></view><view class="password-tips data-v-7f007ccf"><view class="{{['tip-item','data-v-7f007ccf',($root.g0.valid)?'valid':'']}}"><text class="tip-text data-v-7f007ccf">密码长度8-18位</text></view><view class="{{['tip-item','data-v-7f007ccf',(passwordTips.uppercase.valid)?'valid':'']}}"><text class="tip-text data-v-7f007ccf">包含大写字母</text></view><view class="{{['tip-item','data-v-7f007ccf',(passwordTips.lowercase.valid)?'valid':'']}}"><text class="tip-text data-v-7f007ccf">包含小写字母</text></view><view class="{{['tip-item','data-v-7f007ccf',(passwordTips.number.valid)?'valid':'']}}"><text class="tip-text data-v-7f007ccf">包含数字</text></view></view><view class="button-group data-v-7f007ccf"><view data-event-opts="{{[['tap',[['prevStep',['$event']]]]]}}" class="prev-button data-v-7f007ccf" bindtap="__e"><text class="prev-button-text data-v-7f007ccf">上一步</text></view><view data-event-opts="{{[['tap',[['resetPassword',['$event']]]]]}}" class="{{['next-button','data-v-7f007ccf',(isResetting)?'disabled':'']}}" bindtap="__e"><text class="next-button-text data-v-7f007ccf">{{isResetting?'重置中...':'完成重置'}}</text></view></view></view></block></view><view class="login-link data-v-7f007ccf"><text class="login-text data-v-7f007ccf">想起密码了？</text><text data-event-opts="{{[['tap',[['goToLogin',['$event']]]]]}}" class="login-link-text data-v-7f007ccf" bindtap="__e">立即登录</text></view></view></view>