(global["webpackChunkjlp_microprogram_teacher"]=global["webpackChunkjlp_microprogram_teacher"]||[]).push([["pages/students/home/components/ProfileModal"],{"./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-42[0].rules[0].use[0]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/home/components/ProfileModal.vue?vue&type=template&id=34d2ce3b&scoped=true&":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-42[0].rules[0].use[0]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/home/components/ProfileModal.vue?vue&type=template&id=34d2ce3b&scoped=true& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/(e,o,s)=>{"use strict";s.r(o),s.d(o,{components:()=>t,recyclableRender:()=>n,render:()=>d,staticRenderFns:()=>l});var d=function(){var e=this,o=e.$createElement,s=(e._self._c,e.visible&&e.accountSecurityExpanded?e.formatPhoneNumber(e.userInfo.phone||e.userInfo.contactInformation)||"183******70":null);e.$mp.data=Object.assign({},{$root:{m0:s}})},l=[];d._withStripped=!0;var n="undefined"!==typeof n&&n,t="undefined"===typeof t?void 0:t},"./node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-40[0].rules[0].use[1]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/home/components/ProfileModal.vue?vue&type=script&lang=js&":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-40[0].rules[0].use[1]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/home/components/ProfileModal.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/(e,o,s)=>{"use strict";s.r(o),s.d(o,{default:()=>u});var d=s(/*! @/common/request.js */"./common/request.js"),l=s(/*! @/common/url.js */"./common/url.js"),n=s(/*! @/common/secret.js */"./common/secret.js"),t=s(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */"./node_modules/@dcloudio/uni-mp-weixin/dist/index.js")["default"];const u={name:"ProfileModal",props:{visible:{type:Boolean,default:!1},userInfo:{type:Object,default:()=>({name:"李思思",school:"北京市朝阳第一小学 四年级3班"})}},data(){return{accountSecurityExpanded:!1,passwordVisible:!1,oldPassword:"",newPassword:"",confirmPasswordInput:""}},watch:{visible(e){e&&this.getStudentInfo()}},methods:{closeModal(){this.$emit("close")},toggleAccountSecurity(){this.accountSecurityExpanded=!this.accountSecurityExpanded},switchUser(){this.$emit("switchUser")},goToContact(){this.$emit("goToContact")},goToChangePassword(){this.passwordVisible=!0},cancelPassword(){this.oldPassword="",this.newPassword="",this.confirmPasswordInput="",this.passwordVisible=!1},async confirmPassword(){if(!this.newPassword||!this.confirmPasswordInput||!this.oldPassword)return void t.showToast({title:"密码不能为空",icon:"none"});if(this.newPassword.length<8||this.newPassword.length>18||this.confirmPasswordInput.length<8||this.confirmPasswordInput.length>18)return void t.showToast({title:"密码长度请设置在8~18位之间",icon:"none"});let e=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*?[0-9])");if(e.test(this.newPassword)&&e.test(this.confirmPasswordInput))if(this.newPassword===this.confirmPasswordInput)try{t.showLoading({title:"修改中..."});const e={oldPassword:(0,n.MD5_ENCRYPT)(this.oldPassword),newPassword:(0,n.MD5_ENCRYPT)(this.newPassword),newPasswordPlaintext:this.newPassword};console.log("修改密码参数:",e);const o=await(0,d.postReq)(l.URL.apiPostChangePasswordV2,e);console.log("修改密码响应:",o),t.hideLoading(),t.showToast({title:"密码修改成功",icon:"success"}),this.oldPassword="",this.newPassword="",this.confirmPasswordInput="",this.passwordVisible=!1}catch(o){t.hideLoading(),console.error("修改密码失败:",o),t.showToast({title:o.message||"修改密码失败",icon:"none"})}else t.showToast({title:"两次输入的密码不一致",icon:"none"});else t.showToast({title:"密码请包含英文大小写和数字",icon:"none"})},goToUnbindAccount(){this.$emit("goToUnbindAccount")},clearCache(){this.$emit("clearCache")},formatPhoneNumber(e){return e?11===e.length?e.substring(0,3)+"******"+e.substring(9):e:""},async getStudentInfo(){try{const e={studentid:this.userInfo.studentId||this.userInfo.studentid||123456,tag:"student_info"},o=await(0,d.getReq)(l.URL.apiGetStudentInfo,e);return console.log("学生信息:",o),o&&o.data&&this.$emit("updateUserInfo",o.data),o}catch(e){console.error("获取学生信息失败:",e),t.showToast({title:"获取学生信息失败",icon:"none"})}}}}},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22[0].rules[0].use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[2]!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[5]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/home/components/ProfileModal.vue?vue&type=style&index=0&id=34d2ce3b&lang=scss&scoped=true&":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22[0].rules[0].use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[2]!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[5]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/home/components/ProfileModal.vue?vue&type=style&index=0&id=34d2ce3b&lang=scss&scoped=true& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/()=>{},"./pages/students/home/components/ProfileModal.vue":
/*!*********************************************************!*\
  !*** ./pages/students/home/components/ProfileModal.vue ***!
  \*********************************************************/(e,o,s)=>{"use strict";s.r(o),s.d(o,{default:()=>i});var d,l=s(/*! ./ProfileModal.vue?vue&type=template&id=34d2ce3b&scoped=true& */"./pages/students/home/components/ProfileModal.vue?vue&type=template&id=34d2ce3b&scoped=true&"),n=s(/*! ./ProfileModal.vue?vue&type=script&lang=js& */"./pages/students/home/components/ProfileModal.vue?vue&type=script&lang=js&"),t=(s(/*! ./ProfileModal.vue?vue&type=style&index=0&id=34d2ce3b&lang=scss&scoped=true& */"./pages/students/home/components/ProfileModal.vue?vue&type=style&index=0&id=34d2ce3b&lang=scss&scoped=true&"),s(/*! !../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */"./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js")),u=(0,t["default"])(n["default"],l.render,l.staticRenderFns,!1,null,"34d2ce3b",null,!1,l.components,d);u.options.__file="pages/students/home/components/ProfileModal.vue";const i=u.exports},"./pages/students/home/components/ProfileModal.vue?vue&type=script&lang=js&":
/*!**********************************************************************************!*\
  !*** ./pages/students/home/components/ProfileModal.vue?vue&type=script&lang=js& ***!
  \**********************************************************************************/(e,o,s)=>{"use strict";s.r(o),s.d(o,{default:()=>l});var d=s(/*! -!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ProfileModal.vue?vue&type=script&lang=js& */"./node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-40[0].rules[0].use[1]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/home/components/ProfileModal.vue?vue&type=script&lang=js&");const l=d["default"]},"./pages/students/home/components/ProfileModal.vue?vue&type=style&index=0&id=34d2ce3b&lang=scss&scoped=true&":
/*!*******************************************************************************************************************!*\
  !*** ./pages/students/home/components/ProfileModal.vue?vue&type=style&index=0&id=34d2ce3b&lang=scss&scoped=true& ***!
  \*******************************************************************************************************************/(e,o,s)=>{"use strict";s.r(o),s.d(o,{default:()=>t});var d=s(/*! -!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22[0].rules[0].use[0]!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[2]!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[5]!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ProfileModal.vue?vue&type=style&index=0&id=34d2ce3b&lang=scss&scoped=true& */"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22[0].rules[0].use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[2]!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[5]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/home/components/ProfileModal.vue?vue&type=style&index=0&id=34d2ce3b&lang=scss&scoped=true&"),l=s.n(d),n={};for(const u in d)"default"!==u&&(n[u]=()=>d[u]);s.d(o,n);const t=l()},"./pages/students/home/components/ProfileModal.vue?vue&type=template&id=34d2ce3b&scoped=true&":
/*!****************************************************************************************************!*\
  !*** ./pages/students/home/components/ProfileModal.vue?vue&type=template&id=34d2ce3b&scoped=true& ***!
  \****************************************************************************************************/(e,o,s)=>{"use strict";s.r(o),s.d(o,{components:()=>d.components,recyclableRender:()=>d.recyclableRender,render:()=>d.render,staticRenderFns:()=>d.staticRenderFns});var d=s(/*! -!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-42[0].rules[0].use[0]!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ProfileModal.vue?vue&type=template&id=34d2ce3b&scoped=true& */"./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-42[0].rules[0].use[0]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/home/components/ProfileModal.vue?vue&type=template&id=34d2ce3b&scoped=true&")}}]),(global["webpackChunkjlp_microprogram_teacher"]=global["webpackChunkjlp_microprogram_teacher"]||[]).push([["pages/students/home/components/ProfileModal-create-component"],{},function(e){e("./node_modules/@dcloudio/uni-mp-weixin/dist/index.js")["createComponent"](e("./pages/students/home/components/ProfileModal.vue"))}]);