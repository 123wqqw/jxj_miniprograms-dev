(global["webpackChunkjlp_microprogram_teacher"]=global["webpackChunkjlp_microprogram_teacher"]||[]).push([["pages/students/forgotPassword/index"],{'./main.js?{"page":"pages%2Fstudents%2FforgotPassword%2Findex"}':
/*!**********************************************************************!*\
  !*** ./main.js?{"page":"pages%2Fstudents%2FforgotPassword%2Findex"} ***!
  \**********************************************************************/(e,s,o)=>{"use strict";o.r(s);o(/*! uni-pages */"./pages.json"),o(/*! vue */"./node_modules/@dcloudio/vue-cli-plugin-uni/packages/mp-vue/dist/mp.runtime.esm.js");var d=o(/*! ./pages/students/forgotPassword/index.vue */"./pages/students/forgotPassword/index.vue"),t=o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/wx.js */"./node_modules/@dcloudio/uni-mp-weixin/dist/wx.js")["default"],i=o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */"./node_modules/@dcloudio/uni-mp-weixin/dist/index.js")["createPage"];t.__webpack_require_UNI_MP_PLUGIN__=o,i(d["default"])},"./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-42[0].rules[0].use[0]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/forgotPassword/index.vue?vue&type=template&id=7f007ccf&scoped=true&":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-42[0].rules[0].use[0]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/forgotPassword/index.vue?vue&type=template&id=7f007ccf&scoped=true& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/(e,s,o)=>{"use strict";o.r(s),o.d(s,{components:()=>n,recyclableRender:()=>i,render:()=>d,staticRenderFns:()=>t});var d=function(){var e=this,s=e.$createElement,o=(e._self._c,3===e.currentStep?e.passwordTips.length:null);e.$mp.data=Object.assign({},{$root:{g0:o}})},t=[];d._withStripped=!0;var i="undefined"!==typeof i&&i,n="undefined"===typeof n?void 0:n},"./node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-40[0].rules[0].use[1]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/forgotPassword/index.vue?vue&type=script&lang=js&":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-40[0].rules[0].use[1]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/forgotPassword/index.vue?vue&type=script&lang=js& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/(e,s,o)=>{"use strict";o.r(s),o.d(s,{default:()=>n});var d=o(/*! @/common/request.js */"./common/request.js"),t=o(/*! @/common/url.js */"./common/url.js"),i=o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */"./node_modules/@dcloudio/uni-mp-weixin/dist/index.js")["default"];const n={data(){return{statusBarHeight:0,currentStep:1,isVerifying:!1,isResetting:!1,canSendCode:!0,countdown:0,formData:{studentId:"",phone:"",verificationCode:"",newPassword:"",confirmPassword:""},errors:{studentId:"",phone:"",verificationCode:"",newPassword:"",confirmPassword:""},passwordTips:{length:{valid:!1},uppercase:{valid:!1},lowercase:{valid:!1},number:{valid:!1}}}},computed:{codeButtonText(){return this.countdown>0?`${this.countdown}s后重发`:"发送验证码"}},watch:{"formData.newPassword"(e){this.checkPasswordTips(e)}},onLoad(){this.getSystemInfo()},methods:{getSystemInfo(){const e=i.getSystemInfoSync();this.statusBarHeight=e.statusBarHeight||20},clearError(e){this.errors[e]&&(this.errors[e]="")},checkPasswordTips(e){this.passwordTips={length:{valid:e.length>=8&&e.length<=18},uppercase:{valid:/[A-Z]/.test(e)},lowercase:{valid:/[a-z]/.test(e)},number:{valid:/[0-9]/.test(e)}}},async verifyStudentId(){if(!this.isVerifying)if(this.formData.studentId.trim()){this.isVerifying=!0;try{const e={studentId:this.formData.studentId.trim()},s=await(0,d.getReq)(t.URL.apiGetVerifStudentIDNumber,e);if(console.log("验证学籍号响应:",s),!s||!s.data)throw new Error("学籍号不存在，请检查学籍号是否正确");this.currentStep=2}catch(e){console.error("验证学籍号失败:",e),i.showToast({title:e.message||"验证失败，请检查网络连接",icon:"none"})}finally{this.isVerifying=!1}}else this.errors.studentId="请输入学籍号"},async sendVerificationCode(){if(this.canSendCode)if(this.formData.phone.trim())if(/^1[3-9]\d{9}$/.test(this.formData.phone.trim()))try{const e={phone:this.formData.phone.trim()},s=await(0,d.getReq)(t.URL.apiGetCAPTCHA,e);console.log("发送验证码响应:",s),this.startCountdown(),i.showToast({title:"验证码已发送",icon:"success"})}catch(e){console.error("发送验证码失败:",e),i.showToast({title:e.message||"发送失败，请重试",icon:"none"})}else this.errors.phone="请输入正确的手机号";else this.errors.phone="请输入手机号"},startCountdown(){this.canSendCode=!1,this.countdown=60;const e=setInterval(()=>{this.countdown--,this.countdown<=0&&(clearInterval(e),this.canSendCode=!0)},1e3)},async verifyPhone(){if(!this.isVerifying)if(this.formData.phone.trim())if(/^1[3-9]\d{9}$/.test(this.formData.phone.trim()))if(this.formData.verificationCode.trim()){this.isVerifying=!0;try{setTimeout(()=>{this.currentStep=3,this.isVerifying=!1},1e3)}catch(e){console.error("验证手机号失败:",e),i.showToast({title:e.message||"验证失败，请检查网络连接",icon:"none"}),this.isVerifying=!1}}else this.errors.verificationCode="请输入验证码";else this.errors.phone="请输入正确的手机号";else this.errors.phone="请输入手机号"},async resetPassword(){if(this.isResetting)return;if(!this.formData.newPassword.trim())return void(this.errors.newPassword="请输入新密码");if(!this.formData.confirmPassword.trim())return void(this.errors.confirmPassword="请确认新密码");if(this.formData.newPassword!==this.formData.confirmPassword)return void(this.errors.confirmPassword="两次输入的密码不一致");const e=Object.values(this.passwordTips).every(e=>e.valid);if(e){this.isResetting=!0;try{this.formData.studentId.trim(),this.formData.phone.trim(),this.formData.verificationCode.trim(),this.formData.newPassword.trim();setTimeout(()=>{i.showToast({title:"密码重置成功",icon:"success"}),setTimeout(()=>{i.reLaunch({url:"/pages/students/login/index"})},1500)},1e3)}catch(s){console.error("重置密码失败:",s),i.showToast({title:s.message||"重置失败，请检查网络连接",icon:"none"}),this.isResetting=!1}}else i.showToast({title:"密码强度不符合要求",icon:"none"})},prevStep(){this.currentStep>1&&this.currentStep--},goToLogin(){i.navigateBack()}}}},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22[0].rules[0].use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[2]!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[5]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/forgotPassword/index.vue?vue&type=style&index=0&id=7f007ccf&lang=scss&scoped=true&":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22[0].rules[0].use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[2]!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[5]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/forgotPassword/index.vue?vue&type=style&index=0&id=7f007ccf&lang=scss&scoped=true& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/()=>{},"./pages/students/forgotPassword/index.vue":
/*!*************************************************!*\
  !*** ./pages/students/forgotPassword/index.vue ***!
  \*************************************************/(e,s,o)=>{"use strict";o.r(s),o.d(s,{default:()=>u});var d,t=o(/*! ./index.vue?vue&type=template&id=7f007ccf&scoped=true& */"./pages/students/forgotPassword/index.vue?vue&type=template&id=7f007ccf&scoped=true&"),i=o(/*! ./index.vue?vue&type=script&lang=js& */"./pages/students/forgotPassword/index.vue?vue&type=script&lang=js&"),n=(o(/*! ./index.vue?vue&type=style&index=0&id=7f007ccf&lang=scss&scoped=true& */"./pages/students/forgotPassword/index.vue?vue&type=style&index=0&id=7f007ccf&lang=scss&scoped=true&"),o(/*! !../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */"./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js")),r=(0,n["default"])(i["default"],t.render,t.staticRenderFns,!1,null,"7f007ccf",null,!1,t.components,d);r.options.__file="pages/students/forgotPassword/index.vue";const u=r.exports},"./pages/students/forgotPassword/index.vue?vue&type=script&lang=js&":
/*!**************************************************************************!*\
  !*** ./pages/students/forgotPassword/index.vue?vue&type=script&lang=js& ***!
  \**************************************************************************/(e,s,o)=>{"use strict";o.r(s),o.d(s,{default:()=>t});var d=o(/*! -!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js& */"./node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-40[0].rules[0].use[1]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/forgotPassword/index.vue?vue&type=script&lang=js&");const t=d["default"]},"./pages/students/forgotPassword/index.vue?vue&type=style&index=0&id=7f007ccf&lang=scss&scoped=true&":
/*!***********************************************************************************************************!*\
  !*** ./pages/students/forgotPassword/index.vue?vue&type=style&index=0&id=7f007ccf&lang=scss&scoped=true& ***!
  \***********************************************************************************************************/(e,s,o)=>{"use strict";o.r(s),o.d(s,{default:()=>n});var d=o(/*! -!../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22[0].rules[0].use[0]!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[5]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=7f007ccf&lang=scss&scoped=true& */"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22[0].rules[0].use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[2]!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[5]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/forgotPassword/index.vue?vue&type=style&index=0&id=7f007ccf&lang=scss&scoped=true&"),t=o.n(d),i={};for(const r in d)"default"!==r&&(i[r]=()=>d[r]);o.d(s,i);const n=t()},"./pages/students/forgotPassword/index.vue?vue&type=template&id=7f007ccf&scoped=true&":
/*!********************************************************************************************!*\
  !*** ./pages/students/forgotPassword/index.vue?vue&type=template&id=7f007ccf&scoped=true& ***!
  \********************************************************************************************/(e,s,o)=>{"use strict";o.r(s),o.d(s,{components:()=>d.components,recyclableRender:()=>d.recyclableRender,render:()=>d.render,staticRenderFns:()=>d.staticRenderFns});var d=o(/*! -!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-42[0].rules[0].use[0]!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=7f007ccf&scoped=true& */"./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-42[0].rules[0].use[0]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/forgotPassword/index.vue?vue&type=template&id=7f007ccf&scoped=true&")}},e=>{var s=s=>e(e.s=s);e.O(0,["common/vendor"],()=>s('./main.js?{"page":"pages%2Fstudents%2FforgotPassword%2Findex"}'));e.O()}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/students/forgotPassword/index.js.map