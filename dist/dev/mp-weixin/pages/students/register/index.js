(global["webpackChunkjlp_microprogram_teacher"]=global["webpackChunkjlp_microprogram_teacher"]||[]).push([["pages/students/register/index"],{'./main.js?{"page":"pages%2Fstudents%2Fregister%2Findex"}':
/*!****************************************************************!*\
  !*** ./main.js?{"page":"pages%2Fstudents%2Fregister%2Findex"} ***!
  \****************************************************************/(e,s,o)=>{"use strict";o.r(s);o(/*! uni-pages */"./pages.json"),o(/*! vue */"./node_modules/@dcloudio/vue-cli-plugin-uni/packages/mp-vue/dist/mp.runtime.esm.js");var i=o(/*! ./pages/students/register/index.vue */"./pages/students/register/index.vue"),t=o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/wx.js */"./node_modules/@dcloudio/uni-mp-weixin/dist/wx.js")["default"],d=o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */"./node_modules/@dcloudio/uni-mp-weixin/dist/index.js")["createPage"];t.__webpack_require_UNI_MP_PLUGIN__=o,d(i["default"])},"./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-42[0].rules[0].use[0]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/register/index.vue?vue&type=template&id=749ac2d4&scoped=true&":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-42[0].rules[0].use[0]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/register/index.vue?vue&type=template&id=749ac2d4&scoped=true& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/(e,s,o)=>{"use strict";o.r(s),o.d(s,{components:()=>n,recyclableRender:()=>d,render:()=>i,staticRenderFns:()=>t});var i=function(){var e=this,s=e.$createElement,o=(e._self._c,3===e.currentStep?e.passwordTips.length:null);e.$mp.data=Object.assign({},{$root:{g0:o}})},t=[];i._withStripped=!0;var d="undefined"!==typeof d&&d,n="undefined"===typeof n?void 0:n},"./node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-40[0].rules[0].use[1]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/register/index.vue?vue&type=script&lang=js&":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-40[0].rules[0].use[1]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/register/index.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/(e,s,o)=>{"use strict";o.r(s),o.d(s,{default:()=>n});var i=o(/*! @/common/request.js */"./common/request.js"),t=o(/*! @/common/url.js */"./common/url.js"),d=o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */"./node_modules/@dcloudio/uni-mp-weixin/dist/index.js")["default"];const n={data(){return{statusBarHeight:0,currentStep:1,isVerifying:!1,isRegistering:!1,canSendCode:!0,countdown:0,formData:{studentId:"",name:"",phone:"",verificationCode:"",password:"",confirmPassword:""},errors:{studentId:"",name:"",phone:"",verificationCode:"",password:"",confirmPassword:""},passwordTips:{length:{valid:!1},uppercase:{valid:!1},lowercase:{valid:!1},number:{valid:!1}}}},computed:{codeButtonText(){return this.countdown>0?`${this.countdown}s后重发`:"发送验证码"}},watch:{"formData.password"(e){this.checkPasswordTips(e)}},onLoad(){this.getSystemInfo()},methods:{getSystemInfo(){const e=d.getSystemInfoSync();this.statusBarHeight=e.statusBarHeight||20},clearError(e){this.errors[e]&&(this.errors[e]="")},checkPasswordTips(e){this.passwordTips={length:{valid:e.length>=8&&e.length<=18},uppercase:{valid:/[A-Z]/.test(e)},lowercase:{valid:/[a-z]/.test(e)},number:{valid:/[0-9]/.test(e)}}},async verifyStudentId(){if(!this.isVerifying)if(this.formData.studentId.trim())if(this.formData.name.trim()){this.isVerifying=!0;try{const e={studentId:this.formData.studentId.trim(),name:this.formData.name.trim()},s=await(0,i.getReq)(t.URL.apiGetVerifStudentInformation,e);if(console.log("验证学籍号响应:",s),!s||!s.data)throw new Error("学籍号验证失败，请检查信息是否正确");this.currentStep=2}catch(e){console.error("验证学籍号失败:",e),d.showToast({title:e.message||"验证失败，请检查网络连接",icon:"none"})}finally{this.isVerifying=!1}}else this.errors.name="请输入姓名";else this.errors.studentId="请输入学籍号"},async sendVerificationCode(){if(this.canSendCode)if(this.formData.phone.trim())if(/^1[3-9]\d{9}$/.test(this.formData.phone.trim()))try{const e={phone:this.formData.phone.trim()},s=await(0,i.getReq)(t.URL.apiGetCAPTCHA,e);console.log("发送验证码响应:",s),this.startCountdown(),d.showToast({title:"验证码已发送",icon:"success"})}catch(e){console.error("发送验证码失败:",e),d.showToast({title:e.message||"发送失败，请重试",icon:"none"})}else this.errors.phone="请输入正确的手机号";else this.errors.phone="请输入手机号"},startCountdown(){this.canSendCode=!1,this.countdown=60;const e=setInterval(()=>{this.countdown--,this.countdown<=0&&(clearInterval(e),this.canSendCode=!0)},1e3)},async verifyPhone(){if(!this.isVerifying)if(this.formData.phone.trim())if(/^1[3-9]\d{9}$/.test(this.formData.phone.trim()))if(this.formData.verificationCode.trim()){this.isVerifying=!0;try{const e={studentId:this.formData.studentId.trim(),phone:this.formData.phone.trim(),verificationCode:this.formData.verificationCode.trim()},s=await(0,i.getReq)(t.URL.apiGetBindContactInformation,e);if(console.log("绑定手机号响应:",s),!s||!s.data)throw new Error("验证码验证失败，请检查验证码是否正确");this.currentStep=3}catch(e){console.error("验证手机号失败:",e),d.showToast({title:e.message||"验证失败，请检查网络连接",icon:"none"})}finally{this.isVerifying=!1}}else this.errors.verificationCode="请输入验证码";else this.errors.phone="请输入正确的手机号";else this.errors.phone="请输入手机号"},async completeRegister(){if(this.isRegistering)return;if(!this.formData.password.trim())return void(this.errors.password="请输入密码");if(!this.formData.confirmPassword.trim())return void(this.errors.confirmPassword="请确认密码");if(this.formData.password!==this.formData.confirmPassword)return void(this.errors.confirmPassword="两次输入的密码不一致");const e=Object.values(this.passwordTips).every(e=>e.valid);if(e){this.isRegistering=!0;try{const e={studentId:this.formData.studentId.trim(),phone:this.formData.phone.trim(),password:this.formData.password.trim()},s=await(0,i.postReq)(t.URL.apiPostSetPassword,e);if(console.log("设置密码响应:",s),!s||!s.data)throw new Error("注册失败，请重试");d.setStorageSync("xiaotiyunUser",s.data),d.showToast({title:"注册成功",icon:"success"}),setTimeout(()=>{d.reLaunch({url:"/pages/students/home/index"})},1500)}catch(s){console.error("注册失败:",s),d.showToast({title:s.message||"注册失败，请检查网络连接",icon:"none"})}finally{this.isRegistering=!1}}else d.showToast({title:"密码强度不符合要求",icon:"none"})},prevStep(){this.currentStep>1&&this.currentStep--},goToLogin(){d.navigateBack()}}}},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22[0].rules[0].use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[2]!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[5]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/register/index.vue?vue&type=style&index=0&id=749ac2d4&lang=scss&scoped=true&":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22[0].rules[0].use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[2]!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[5]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/register/index.vue?vue&type=style&index=0&id=749ac2d4&lang=scss&scoped=true& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/()=>{},"./pages/students/register/index.vue":
/*!*******************************************!*\
  !*** ./pages/students/register/index.vue ***!
  \*******************************************/(e,s,o)=>{"use strict";o.r(s),o.d(s,{default:()=>a});var i,t=o(/*! ./index.vue?vue&type=template&id=749ac2d4&scoped=true& */"./pages/students/register/index.vue?vue&type=template&id=749ac2d4&scoped=true&"),d=o(/*! ./index.vue?vue&type=script&lang=js& */"./pages/students/register/index.vue?vue&type=script&lang=js&"),n=(o(/*! ./index.vue?vue&type=style&index=0&id=749ac2d4&lang=scss&scoped=true& */"./pages/students/register/index.vue?vue&type=style&index=0&id=749ac2d4&lang=scss&scoped=true&"),o(/*! !../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */"./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js")),r=(0,n["default"])(d["default"],t.render,t.staticRenderFns,!1,null,"749ac2d4",null,!1,t.components,i);r.options.__file="pages/students/register/index.vue";const a=r.exports},"./pages/students/register/index.vue?vue&type=script&lang=js&":
/*!********************************************************************!*\
  !*** ./pages/students/register/index.vue?vue&type=script&lang=js& ***!
  \********************************************************************/(e,s,o)=>{"use strict";o.r(s),o.d(s,{default:()=>t});var i=o(/*! -!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js& */"./node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-40[0].rules[0].use[1]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/register/index.vue?vue&type=script&lang=js&");const t=i["default"]},"./pages/students/register/index.vue?vue&type=style&index=0&id=749ac2d4&lang=scss&scoped=true&":
/*!*****************************************************************************************************!*\
  !*** ./pages/students/register/index.vue?vue&type=style&index=0&id=749ac2d4&lang=scss&scoped=true& ***!
  \*****************************************************************************************************/(e,s,o)=>{"use strict";o.r(s),o.d(s,{default:()=>n});var i=o(/*! -!../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22[0].rules[0].use[0]!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[5]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=749ac2d4&lang=scss&scoped=true& */"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22[0].rules[0].use[0]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[2]!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[5]!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/register/index.vue?vue&type=style&index=0&id=749ac2d4&lang=scss&scoped=true&"),t=o.n(i),d={};for(const r in i)"default"!==r&&(d[r]=()=>i[r]);o.d(s,d);const n=t()},"./pages/students/register/index.vue?vue&type=template&id=749ac2d4&scoped=true&":
/*!**************************************************************************************!*\
  !*** ./pages/students/register/index.vue?vue&type=template&id=749ac2d4&scoped=true& ***!
  \**************************************************************************************/(e,s,o)=>{"use strict";o.r(s),o.d(s,{components:()=>i.components,recyclableRender:()=>i.recyclableRender,render:()=>i.render,staticRenderFns:()=>i.staticRenderFns});var i=o(/*! -!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-42[0].rules[0].use[0]!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=749ac2d4&scoped=true& */"./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-42[0].rules[0].use[0]!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pages/students/register/index.vue?vue&type=template&id=749ac2d4&scoped=true&")}},e=>{var s=s=>e(e.s=s);e.O(0,["common/vendor"],()=>s('./main.js?{"page":"pages%2Fstudents%2Fregister%2Findex"}'));e.O()}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/students/register/index.js.map