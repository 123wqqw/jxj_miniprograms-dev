{"version":3,"file":"pages/login/login/login.js","mappings":"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","sources":["uni-app:///main.js","webpack:///./pages/login/login/login.vue?8c3d","uni-app:///pages/login/login/login.vue","webpack:///./pages/login/login/login.vue?499d","webpack:///./pages/login/login/login.vue?b793","webpack:///./pages/login/login/login.vue?18ad"],"sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/login/login/login.vue'\ncreatePage(Page)","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nvar recyclableRender = (typeof recyclableRender === 'undefined') ? false : recyclableRender;\nvar components = (typeof components === 'undefined') ? undefined : components;\n\nexport { render, staticRenderFns, recyclableRender, components }","<template>\n\t<view class=\"login-container\">\n\t\t<!-- 顶部背景图片 -->\n\t\t<view class=\"top-background\">\n\t\t\t<image src=\"/static/login.png\" mode=\"aspectFill\" class=\"background-image\"></image>\n\t\t</view>\n\t\t\n\t\t<!-- 白色背景区域 -->\n\t\t<view class=\"white-background\">\n\t\t\t<!-- 登录卡片 -->\n\t\t\t<view class=\"login-card\">\n\t\t\t<!-- 角色选择标签 -->\n\t\t\t<view class=\"role-tabs\">\n\t\t\t\t<view \n\t\t\t\t\tclass=\"tab-item\" \n\t\t\t\t\t:class=\"{ active: currentRole === 'student' }\"\n\t\t\t\t\t@click=\"switchRole('student')\"\n\t\t\t\t>\n\t\t\t\t\t学生登录\n\t\t\t\t</view>\n\t\t\t\t<view \n\t\t\t\t\tclass=\"tab-item\" \n\t\t\t\t\t:class=\"{ active: currentRole === 'teacher' }\"\n\t\t\t\t\t@click=\"switchRole('teacher')\"\n\t\t\t\t>\n\t\t\t\t\t教师登录\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 表单区域 -->\n\t\t\t<view class=\"form-container\">\n\t\t\t\t<!-- 学生登录表单 -->\n\t\t\t\t<view v-if=\"currentRole === 'student'\" class=\"form-section\">\n\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t<text class=\"input-label\">学籍号：</text>\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\tclass=\"input-field\" \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tv-model=\"studentForm.studentId\" \n\t\t\t\t\t\t\t@input=\"watchForm\"\n\t\t\t\t\t\t\tplaceholder=\"请输入\" \n\t\t\t\t\t\t\tplaceholder-class=\"input-placeholder\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t<text class=\"input-label\">密码：</text>\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\tclass=\"input-field\" \n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tpassword=\"true\"\n\t\t\t\t\t\t\tv-model=\"studentForm.password\" \n\t\t\t\t\t\t\t@input=\"watchForm\"\n\t\t\t\t\t\t\tplaceholder=\"请输入\" \n\t\t\t\t\t\t\tplaceholder-class=\"input-placeholder\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 教师登录表单 -->\n\t\t\t\t<view v-if=\"currentRole === 'teacher'\" class=\"form-section\">\n\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t<text class=\"input-label\">手机号：</text>\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\tclass=\"input-field\" \n\t\t\t\t\t\t\ttype=\"number\" \n\t\t\t\t\t\t\tv-model=\"teacherForm.phone\" \n\t\t\t\t\t\t\t@input=\"watchForm\"\n\t\t\t\t\t\t\tplaceholder=\"请输入\" \n\t\t\t\t\t\t\tplaceholder-class=\"input-placeholder\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t<text class=\"input-label\">密码：</text>\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\tclass=\"input-field\" \n\t\t\t\t\t\t\ttype=\"password\" \n\t\t\t\t\t\t\tpassword=\"true\"\n\t\t\t\t\t\t\tv-model=\"teacherForm.password\" \n\t\t\t\t\t\t\t@input=\"watchForm\"\n\t\t\t\t\t\t\tplaceholder=\"请输入\" \n\t\t\t\t\t\t\tplaceholder-class=\"input-placeholder\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 登录按钮 -->\n\t\t\t\t<button class=\"login-btn\" @click=\"handleLogin\">登录</button>\n\t\t\t\t\n\t\t\t\t<!-- 底部链接 -->\n\t\t\t\t<view class=\"bottom-links\">\n\t\t\t\t\t<view v-if=\"currentRole === 'student'\" class=\"link-group\">\n\t\t\t\t\t\t<text class=\"link-text register-link\" @click=\"goToRegister\">账号注册</text>\n\t\t\t\t\t\t<text class=\"link-text forgot-link\" @click=\"goToForgotPassword\">忘记账号或密码</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view v-if=\"currentRole === 'teacher'\" class=\"link-group teacher-links\">\n\t\t\t\t\t\t<text></text>\n\t\t\t\t\t\t<text class=\"link-text forgot-link\" @click=\"goToForgotPassword\">忘记账号或密码</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport {\n\t\tmapState,\n\t\tmapMutations,\n\t\tmapActions\n\t} from 'vuex'\n\timport {\n\t\tgetReq,\n\t\tpostReq\n\t} from \"../../../common/request.js\";\n\timport {\n\t\tURL\n\t} from \"../../../common/url.js\";\n\timport {\n\t\tshowToast,\n\t\tdateFormat\n\t} from '@/common/util.js'\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tcurrentRole: 'student', // 当前角色：student 或 teacher\n\t\t\t\tloginDisabled: true,\n\t\t\t\tstudentForm: {\n\t\t\t\t\tstudentId: '',\n\t\t\t\t\tpassword: ''\n\t\t\t\t},\n\t\t\t\tteacherForm: {\n\t\t\t\t\tphone: '',\n\t\t\t\t\tpassword: ''\n\t\t\t\t},\n\t\t\t\tparentId: '',\n\t\t\t\titems: [{}],\n\t\t\t\ttitList: [],\n\n\t\t\t\t// 国际化\n\t\t\t\tpleaseCheckLocation: this.$t('main.login.login.pleaseCheckLocation'),\n\t\t\t\tpopupTitle: this.$t('main.login.login.popupTitle'),\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\tuni.setNavigationBarTitle({\n\t\t\t\ttitle: this.$t('main.login.login.title')\n\t\t\t})\n\t\t\t//获取区域信息\n\t\t\tthis.getUserCenterGetAreaList()\n\t\t},\n\t\tcomputed: {\n\t\t\t...mapState(['openid', 'userid', 'xiaotiyunUser']),\n\t\t},\n\t\tmethods: {\n\t\t\t...mapMutations(['setXiaotiyunUser', 'setTeacherTabBar']),\n\t\t\t\n\t\t\t// 切换角色\n\t\t\tswitchRole(role) {\n\t\t\t\tthis.currentRole = role;\n\t\t\t\tthis.loginDisabled = true;\n\t\t\t\t// 清空表单\n\t\t\t\tthis.studentForm = { studentId: '', password: '' };\n\t\t\t\tthis.teacherForm = { phone: '', password: '' };\n\t\t\t},\n\t\t\t\n\t\t\t// 监听表单变化\n\t\t\twatchForm() {\n\t\t\t\tlet form = this.currentRole === 'student' ? this.studentForm : this.teacherForm;\n\t\t\t\tlet isEmpty = false;\n\t\t\t\t\n\t\t\t\tObject.keys(form).forEach(key => {\n\t\t\t\t\tif (!form[key] || form[key].trim() === '') {\n\t\t\t\t\t\tisEmpty = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.loginDisabled = isEmpty;\n\t\t\t},\n\t\t\t\n\t\t\t// 处理登录\n\t\t\thandleLogin() {\n\t\t\t\tif (this.loginDisabled) return;\n\t\t\t\t\n\t\t\t\tif (this.currentRole === 'student') {\n\t\t\t\t\tthis.studentLogin();\n\t\t\t\t} else {\n\t\t\t\t\tthis.teacherLogin();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 学生登录\n\t\t\tstudentLogin() {\n\t\t\t\t// 学生账号密码登录\n\t\t\t\tconst account = this.studentForm.studentId.trim();\n\t\t\t\tconst password = this.studentForm.password.trim();\n\t\t\t\tpostReq(URL.apiPostStudentPasswordLogin, {\n\t\t\t\t\taccount,\n\t\t\t\t\tpassword\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif (res.error == 10000) {\n\t\t\t\t\t\t// 登录成功，保存关键信息并跳转首页\n\t\t\t\t\t\tlet info = res.data || {};\n\t\t\t\t\t\tlet xiaotiyunUser = {\n\t\t\t\t\t\t\tstudent: {\n\t\t\t\t\t\t\t\t...this.xiaotiyunUser.student,\n\t\t\t\t\t\t\t\t...info,\n\t\t\t\t\t\t\t\taccount,\n\t\t\t\t\t\t\t\tisOnePass: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.setXiaotiyunUser(xiaotiyunUser);\n\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\turl: \"/pagesStudent/home/index\"\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowToast(res.message || '登录失败');\n\t\t\t\t\t}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tshowToast(err.message || '网络错误，请重试');\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 教师登录\n\t\t\tteacherLogin() {\n\t\t\t\t// 使用原有的教师登录逻辑\n\t\t\t\tpostReq(URL.apiPostTeachersCheckAccount, {\n\t\t\t\t\taccount: this.teacherForm.phone,\n\t\t\t\t\tpassword: this.teacherForm.password,\n\t\t\t\t\twechatOpenid: this.openid,\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif (res.error == 10000) {\n\t\t\t\t\t\tlet info = res.data;\n\t\t\t\t\t\tinfo.teacherAccount = this.teacherForm.phone;\n\t\t\t\t\t\tinfo.password = this.teacherForm.password\n\t\t\t\t\t\tlet xiaotiyunUser = {\n\t\t\t\t\t\t\tteacher: {\n\t\t\t\t\t\t\t\t...info,\n\t\t\t\t\t\t\t\t...this.xiaotiyunUser.teacher,\n\t\t\t\t\t\t\t\tisOnePass: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.setXiaotiyunUser(xiaotiyunUser);\n\t\t\t\t\t\tif (info.phone) {\n\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\turl: \"/pagesStudent/home/index\"\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\turl: '/pages/login/bindPhone/bindPhone'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (res.error == 10317) {\n\t\t\t\t\t\tconst date = dateFormat(new Date(res.data), 'yyyy年MM月dd日');\n\t\t\t\t\t\tconst message = `您的账号已于 ${date} 到期如需继续使用，请联系平台商务`;\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\tcontent: message,\n\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\tconfirmText: '知道了',\n\t\t\t\t\t\t\tsuccess: (action) => {}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowToast(res.message)\n\t\t\t\t\t}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tshowToast(err.message)\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 跳转到注册页面\n\t\t\tgoToRegister() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/login/auth/step1?type=register'\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 跳转到忘记密码页面\n\t\t\tgoToForgotPassword() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\turl: `/pages/login/auth/step1`\n\t\t\t\t\t\t})\n\t\t\t},\n\t\t\t// 区域信息\n\t\t\tgetUserCenterGetAreaList() {\n\t\t\t\tgetReq(URL.userCenterGetAreaList).then(res => {\n\t\t\t\t\tif (res.error == 10000) {\n\t\t\t\t\t\tif (res.data) {\n\t\t\t\t\t\t\tthis.items = res.data.map(function(item) {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\t// gradeNameA: this.getGradeContent(item.grade)\n\t\t\t\t\t\t\t\t\ttext: item.areaName,\n\t\t\t\t\t\t\t\t\tvalue: item.areaId,\n\t\t\t\t\t\t\t\t\tchildren: (item.children || []).map(function(itemer) {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t...itemer,\n\t\t\t\t\t\t\t\t\t\t\ttext: itemer.areaName,\n\t\t\t\t\t\t\t\t\t\t\tvalue: itemer.areaId,\n\t\t\t\t\t\t\t\t\t\t\tchildren: (itemer.children || []).map(function(\n\t\t\t\t\t\t\t\t\t\t\t\titemers) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t...itemers,\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: itemers.areaName,\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: itemers.areaId\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowToast(res.message)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t// titChange(e) {\n\t\t\t// \tconsole.log(e, 333)\n\t\t\t// \tthis.form.school = this.titList[e].name\n\t\t\t// \t// this.physicalId = this.titList[e].physicalId\n\t\t\t// \t// this.getList()\n\t\t\t// \tthis.watchForm()\n\t\t\t// },\n\t\t\t// 根据区域id 获取学校\n\t\t\t// getSchoolList(areaId) {\n\t\t\t// \tlet params = {\n\t\t\t// \t\tareaId: areaId\n\t\t\t// \t}\n\t\t\t// \tgetReq(URL.userCenterGetAllSchool, params).then(res => {\n\t\t\t// \t\tif (res.error == 10000) {\n\t\t\t// \t\t\tif (res.data) {\n\t\t\t// \t\t\t\tthis.titList = res.data.map(function(item) {\n\t\t\t// \t\t\t\t\treturn {\n\t\t\t// \t\t\t\t\t\t...item,\n\t\t\t// \t\t\t\t\t\ttext: item.name,\n\t\t\t// \t\t\t\t\t\tvalue: item.schoolId\n\t\t\t// \t\t\t\t\t}\n\t\t\t// \t\t\t\t})\n\t\t\t// \t\t\t}\n\t\t\t// \t\t} else {\n\t\t\t// \t\t\tshowToast(res.message)\n\t\t\t// \t\t}\n\t\t\t// \t})\n\t\t\t// },\n\t\t\t// onchange(e) {\n\t\t\t// \tconst value = e.detail.value\n\t\t\t// },\n\t\t\tonnodeclick(node) {\n\t\t\t\tgetReq(URL.userCenterGetDomain, {\n\t\t\t\t\tareaId: node.areaId\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif (res.error == 10000) {\n\t\t\t\t\t\tlet xiaotiyunUser = {\n\t\t\t\t\t\t\tteacher: {\n\t\t\t\t\t\t\t\t...this.xiaotiyunUser.teacher,\n\t\t\t\t\t\t\t\tdomain: res.data\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.setXiaotiyunUser(xiaotiyunUser);\n\t\t\t\t\t\tthis.setTeacherTabBar();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowToast(res.message)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t// this.getSchoolList(node.value)\n\t\t\t},\n\t\t\t// chooseSchool() {\n\t\t\t// \tthis.schoolShow = true\n\t\t\t// },\n\t\t\tlogin() {\n\t\t\t\tpostReq(URL.apiPostTeachersCheckAccount, {\n\t\t\t\t\taccount: this.form.account,\n\t\t\t\t\tpassword: this.form.password,\n\t\t\t\t\twechatOpenid: this.openid,\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif (res.error == 10000) {\n\t\t\t\t\t\t// uni.setStorageSync('account', this.form.account);\n\t\t\t\t\t\tlet info = res.data;\n\t\t\t\t\t\tinfo.teacherAccount = this.form.account;\n\t\t\t\t\t\tinfo.password = this.form.password\n\t\t\t\t\t\tlet xiaotiyunUser = {\n\t\t\t\t\t\t\tteacher: {\n\t\t\t\t\t\t\t\t...info,\n\t\t\t\t\t\t\t\t...this.xiaotiyunUser.teacher,\n\t\t\t\t\t\t\t\tisOnePass: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.setXiaotiyunUser(xiaotiyunUser);\n\t\t\t\t\t\tif (info.phone) {\n\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\turl: \"/pages/home/index/index\"\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\turl: '/pages/login/bindPhone/bindPhone'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (res.error == 10317) {\n\t\t\t\t\t\tconst date = dateFormat(new Date(res.data), 'yyyy年MM月dd日');\n\t\t\t\t\t\tconst message = `您的账号已于 ${date} 到期如需继续使用，请联系平台商务`;\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\tcontent: message,\n\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\tconfirmText: '知道了',\n\t\t\t\t\t\t\tsuccess: (action) => {}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowToast(res.message)\n\t\t\t\t\t}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tshowToast(err.message)\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.login-container {\n\t\twidth: 100%;\n\t\tmin-height: 100vh;\n\t\tbackground: #FFFFFF;\n\t}\n\n\t.top-background {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\theight: 500rpx;\n\t\toverflow: hidden;\n\t}\n\n\t.background-image {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.white-background {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\tmin-height: calc(100vh - 500rpx);\n\t\tbackground: #FFFFFF;\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tjustify-content: center;\n\t\tpadding: 40rpx;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.login-card {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\tmax-width: 600rpx;\n\t\tbackground: #FFFFFF;\n\t\tborder-radius: 20rpx;\n\t\tbox-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);\n\t\toverflow: hidden;\n\t\tpadding: 40rpx;\n\t\tmargin-top: -216rpx;\n\t}\n\n\t.role-tabs {\n\t\tdisplay: flex;\n\t\tborder-bottom: 1rpx solid #F0F0F0;\n\t\tjustify-content: center;\n\t\talign-items: flex-start;\n\t\tgap: 20px;\n\t\talign-self: stretch;\n\t}\n\n\t.tab-item {\n\t\theight: 100rpx;\n\t\tline-height: 100rpx;\n\t\ttext-align: center;\n\t\tfont-size: 36rpx;\n\t\tcolor: #999999;\n\t\tposition: relative;\n\t\ttransition: all 0.3s ease;\n\t\ttext-align: center;\n\t\tfont-feature-settings: 'liga' off, 'clig' off;\n\t\t/* 大2M */\n\t\tfont-style: normal;\n\t\tfont-weight: 400;\n\t\tline-height: normal;\n\t\t&.active {\n\t\t\tcolor: #333333;\n\t\t\tfont-weight: 600;\n\t\t\t&::after {\n\t\t\t\tcontent: '';\n\t\t\t\tposition: absolute;\n\t\t\t\tbottom: 38rpx;\n\t\t\t\tleft: 50%;\n\t\t\t\ttransform: translateX(-50%);\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 8rpx;\n\t\t\t\tbackground: #2C84FF;\n\t\t\t\tborder-radius: 10rpx;\n\t\t\t}\n\t\t}\n\t}\n\n\t.form-container {\n\t\tpadding: 60rpx 40rpx 40rpx;\n\t}\n\n\t.form-section {\n\t\tmargin-bottom: 40rpx;\n\t}\n\n\t.input-group {\n\t\tmargin-bottom: 40rpx;\n\n\t\t&:last-child {\n\t\t\tmargin-bottom: 0;\n\t\t}\n\t}\n\n\t.input-label {\n\t\tdisplay: block;\n\t\tfont-size: 28rpx;\n\t\tcolor: #333333;\n\t\tmargin-bottom: 16rpx;\n\t\tfont-weight: 500;\n\t}\n\n\t.input-field {\n\t\twidth: 100%;\n\t\theight: 88rpx;\n\t\tbackground: #FFFFFF;\n\t\tborder: 2rpx solid #E0E0E0;\n\t\tborder-radius: 8rpx;\n\t\tpadding: 0 24rpx;\n\t\tfont-size: 28rpx;\n\t\tcolor: #333333;\n\t\tbox-sizing: border-box;\n\t\ttransition: border-color 0.3s ease;\n\n\t\t&:focus {\n\t\t\tborder-color: #5C8FF7;\n\t\t}\n\t}\n\n\t.input-placeholder {\n\t\tcolor: #999999;\n\t}\n\n\t.login-btn {\n\t\twidth: 100%;\n\t\theight: 88rpx;\n\t\tbackground: #2c84ff;\n\t\tborder: none;\n\t\tborder-radius: 16rpx;\n\t\tfont-size: 28rpx;\n\t\tcolor: #FFFFFF;\n\t\ttransition: all 0.3s ease;\n\t\tline-height: 88rpx;\n\t}\n\n\t.bottom-links {\n\t\tmargin-top: 40rpx;\n\t}\n\n\t.link-group {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\n\t\t\n\t}\n\n\t.link-text {\n\t\tfont-size: 28rpx;\n\t\ttext-decoration: none;\n\t\ttransition: color 0.3s ease;\n\n\t\t&.register-link {\n\t\t\tcolor: #2C84FF;\n\t\t}\n\n\t\t&.forgot-link {\n\t\t\tcolor: #999999;\n\t\t}\n\n\t\t&:active {\n\t\t\topacity: 0.7;\n\t\t}\n\t}\n\n\t// 隐藏原有的样式\n\t::v-deep .input-value {\n\t\tborder: 0;\n\t}\n\n\t::v-deep .uni-data-tree {\n\t\tposition: relative;\n\t\tbottom: -6rpx;\n\t\tleft: -10rpx;\n\t}\n\n\t::v-deep .arrow-area {\n\t\tdisplay: none;\n\t}\n</style>","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=1389b5f4&scoped=true&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=1389b5f4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1389b5f4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/login/login.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22[0].rules[0].use[0]!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[5]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&id=1389b5f4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22[0].rules[0].use[0]!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[5]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&id=1389b5f4&lang=scss&scoped=true&\""],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","render","_vm","this","_h","$createElement","_self","_c","staticRenderFns","_withStripped","recyclableRender","components","undefined","data","currentRole","loginDisabled","studentForm","studentId","password","teacherForm","phone","parentId","items","titList","pleaseCheckLocation","$t","popupTitle","onLoad","uni","setNavigationBarTitle","title","getUserCenterGetAreaList","computed","mapState","methods","mapMutations","switchRole","role","watchForm","form","isEmpty","Object","keys","forEach","key","trim","handleLogin","studentLogin","teacherLogin","account","postReq","URL","apiPostStudentPasswordLogin","then","res","error","info","xiaotiyunUser","student","isOnePass","setXiaotiyunUser","reLaunch","url","showToast","message","catch","err","apiPostTeachersCheckAccount","wechatOpenid","openid","teacherAccount","teacher","switchTab","date","dateFormat","Date","showModal","content","showCancel","confirmText","success","action","goToRegister","navigateTo","goToForgotPassword","getReq","userCenterGetAreaList","map","item","text","areaName","value","areaId","children","itemer","itemers","onnodeclick","node","userCenterGetDomain","domain","setTeacherTabBar","login","renderjs","component","options","__file"],"sourceRoot":""}