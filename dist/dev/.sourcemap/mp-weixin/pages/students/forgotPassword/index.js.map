{"version":3,"file":"pages/students/forgotPassword/index.js","mappings":"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","sources":["uni-app:///main.js","webpack:///./pages/students/forgotPassword/index.vue?71ad","uni-app:///pages/students/forgotPassword/index.vue","webpack:///./pages/students/forgotPassword/index.vue?f98d","webpack:///./pages/students/forgotPassword/index.vue?31f1","webpack:///./pages/students/forgotPassword/index.vue?6740"],"sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/students/forgotPassword/index.vue'\ncreatePage(Page)","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.currentStep === 3 ? _vm.passwordTips.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nvar recyclableRender = (typeof recyclableRender === 'undefined') ? false : recyclableRender;\nvar components = (typeof components === 'undefined') ? undefined : components;\n\nexport { render, staticRenderFns, recyclableRender, components }","<template>\n\t<view class=\"forgot-password-container\">\n\t\t<!-- 顶部背景图片 -->\n\t\t<view class=\"top-background\">\n\t\t\t<image src=\"/static/images/students/bgimage.png\" mode=\"aspectFill\" class=\"background-image\"></image>\n\t\t</view>\n\t\t\n\t\t<!-- 状态栏占位 -->\n\t\t<view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\n\t\t\n\t\t<!-- 忘记密码表单区域 -->\n\t\t<view class=\"forgot-password-form-container\">\n\t\t\t<!-- Logo区域 -->\n\t\t\t<view class=\"logo-section\">\n\t\t\t\t<image src=\"/static/images/students/logo.png\" mode=\"aspectFit\" class=\"logo-image\"></image>\n\t\t\t\t<view class=\"app-title\">校体云</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 步骤指示器 -->\n\t\t\t<view class=\"step-indicator\">\n\t\t\t\t<view class=\"step-item\" :class=\"{ 'active': currentStep >= 1, 'completed': currentStep > 1 }\">\n\t\t\t\t\t<view class=\"step-number\">1</view>\n\t\t\t\t\t<view class=\"step-text\">输入学籍号</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"step-line\" :class=\"{ 'active': currentStep > 1 }\"></view>\n\t\t\t\t<view class=\"step-item\" :class=\"{ 'active': currentStep >= 2, 'completed': currentStep > 2 }\">\n\t\t\t\t\t<view class=\"step-number\">2</view>\n\t\t\t\t\t<view class=\"step-text\">验证身份</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"step-line\" :class=\"{ 'active': currentStep > 2 }\"></view>\n\t\t\t\t<view class=\"step-item\" :class=\"{ 'active': currentStep >= 3 }\">\n\t\t\t\t\t<view class=\"step-number\">3</view>\n\t\t\t\t\t<view class=\"step-text\">重置密码</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 忘记密码表单 -->\n\t\t\t<view class=\"forgot-password-form\">\n\t\t\t\t<!-- 步骤1：输入学籍号 -->\n\t\t\t\t<view class=\"form-step\" v-if=\"currentStep === 1\">\n\t\t\t\t\t<view class=\"step-title\">忘记密码</view>\n\t\t\t\t\t<view class=\"step-desc\">请输入您的学籍号，我们将验证您的身份信息</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t<view class=\"input-label\">学籍号</view>\n\t\t\t\t\t\t<view class=\"input-wrapper\">\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\tv-model=\"formData.studentId\" \n\t\t\t\t\t\t\t\tplaceholder=\"请输入学籍号\" \n\t\t\t\t\t\t\t\tclass=\"input-field\"\n\t\t\t\t\t\t\t\t:class=\"{ 'error': errors.studentId }\"\n\t\t\t\t\t\t\t\t@input=\"clearError('studentId')\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"error-message\" v-if=\"errors.studentId\">{{ errors.studentId }}</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"next-button\" @click=\"verifyStudentId\" :class=\"{ 'disabled': isVerifying }\">\n\t\t\t\t\t\t<text class=\"next-button-text\">{{ isVerifying ? '验证中...' : '下一步' }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 步骤2：验证身份 -->\n\t\t\t\t<view class=\"form-step\" v-if=\"currentStep === 2\">\n\t\t\t\t\t<view class=\"step-title\">验证身份</view>\n\t\t\t\t\t<view class=\"step-desc\">请输入您的手机号，我们将发送验证码</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t<view class=\"input-label\">手机号</view>\n\t\t\t\t\t\t<view class=\"input-wrapper\">\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\tv-model=\"formData.phone\" \n\t\t\t\t\t\t\t\tplaceholder=\"请输入手机号\" \n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tclass=\"input-field\"\n\t\t\t\t\t\t\t\t:class=\"{ 'error': errors.phone }\"\n\t\t\t\t\t\t\t\t@input=\"clearError('phone')\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"error-message\" v-if=\"errors.phone\">{{ errors.phone }}</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t<view class=\"input-label\">验证码</view>\n\t\t\t\t\t\t<view class=\"input-wrapper verification-wrapper\">\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\tv-model=\"formData.verificationCode\" \n\t\t\t\t\t\t\t\tplaceholder=\"请输入验证码\" \n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tclass=\"input-field verification-input\"\n\t\t\t\t\t\t\t\t:class=\"{ 'error': errors.verificationCode }\"\n\t\t\t\t\t\t\t\t@input=\"clearError('verificationCode')\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<view class=\"verification-btn\" @click=\"sendVerificationCode\" :class=\"{ 'disabled': !canSendCode }\">\n\t\t\t\t\t\t\t\t<text class=\"verification-btn-text\">{{ codeButtonText }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"error-message\" v-if=\"errors.verificationCode\">{{ errors.verificationCode }}</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"button-group\">\n\t\t\t\t\t\t<view class=\"prev-button\" @click=\"prevStep\">\n\t\t\t\t\t\t\t<text class=\"prev-button-text\">上一步</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"next-button\" @click=\"verifyPhone\" :class=\"{ 'disabled': isVerifying }\">\n\t\t\t\t\t\t\t<text class=\"next-button-text\">{{ isVerifying ? '验证中...' : '下一步' }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 步骤3：重置密码 -->\n\t\t\t\t<view class=\"form-step\" v-if=\"currentStep === 3\">\n\t\t\t\t\t<view class=\"step-title\">重置密码</view>\n\t\t\t\t\t<view class=\"step-desc\">请设置您的新密码</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t<view class=\"input-label\">新密码</view>\n\t\t\t\t\t\t<view class=\"input-wrapper\">\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\tv-model=\"formData.newPassword\" \n\t\t\t\t\t\t\t\tplaceholder=\"请输入8-18位新密码\" \n\t\t\t\t\t\t\t\tpassword\n\t\t\t\t\t\t\t\tclass=\"input-field\"\n\t\t\t\t\t\t\t\t:class=\"{ 'error': errors.newPassword }\"\n\t\t\t\t\t\t\t\t@input=\"clearError('newPassword')\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"error-message\" v-if=\"errors.newPassword\">{{ errors.newPassword }}</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t<view class=\"input-label\">确认新密码</view>\n\t\t\t\t\t\t<view class=\"input-wrapper\">\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\tv-model=\"formData.confirmPassword\" \n\t\t\t\t\t\t\t\tplaceholder=\"请再次输入新密码\" \n\t\t\t\t\t\t\t\tpassword\n\t\t\t\t\t\t\t\tclass=\"input-field\"\n\t\t\t\t\t\t\t\t:class=\"{ 'error': errors.confirmPassword }\"\n\t\t\t\t\t\t\t\t@input=\"clearError('confirmPassword')\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"error-message\" v-if=\"errors.confirmPassword\">{{ errors.confirmPassword }}</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"password-tips\">\n\t\t\t\t\t\t<view class=\"tip-item\" :class=\"{ 'valid': passwordTips.length.valid }\">\n\t\t\t\t\t\t\t<text class=\"tip-text\">密码长度8-18位</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"tip-item\" :class=\"{ 'valid': passwordTips.uppercase.valid }\">\n\t\t\t\t\t\t\t<text class=\"tip-text\">包含大写字母</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"tip-item\" :class=\"{ 'valid': passwordTips.lowercase.valid }\">\n\t\t\t\t\t\t\t<text class=\"tip-text\">包含小写字母</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"tip-item\" :class=\"{ 'valid': passwordTips.number.valid }\">\n\t\t\t\t\t\t\t<text class=\"tip-text\">包含数字</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"button-group\">\n\t\t\t\t\t\t<view class=\"prev-button\" @click=\"prevStep\">\n\t\t\t\t\t\t\t<text class=\"prev-button-text\">上一步</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"next-button\" @click=\"resetPassword\" :class=\"{ 'disabled': isResetting }\">\n\t\t\t\t\t\t\t<text class=\"next-button-text\">{{ isResetting ? '重置中...' : '完成重置' }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 登录链接 -->\n\t\t\t<view class=\"login-link\">\n\t\t\t\t<text class=\"login-text\">想起密码了？</text>\n\t\t\t\t<text class=\"login-link-text\" @click=\"goToLogin\">立即登录</text>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { getReq, postReq } from '@/common/request.js'\nimport { URL } from '@/common/url.js'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tstatusBarHeight: 0,\n\t\t\tcurrentStep: 1,\n\t\t\tisVerifying: false,\n\t\t\tisResetting: false,\n\t\t\tcanSendCode: true,\n\t\t\tcountdown: 0,\n\t\t\tformData: {\n\t\t\t\tstudentId: '',\n\t\t\t\tphone: '',\n\t\t\t\tverificationCode: '',\n\t\t\t\tnewPassword: '',\n\t\t\t\tconfirmPassword: ''\n\t\t\t},\n\t\t\terrors: {\n\t\t\t\tstudentId: '',\n\t\t\t\tphone: '',\n\t\t\t\tverificationCode: '',\n\t\t\t\tnewPassword: '',\n\t\t\t\tconfirmPassword: ''\n\t\t\t},\n\t\t\tpasswordTips: {\n\t\t\t\tlength: { valid: false },\n\t\t\t\tuppercase: { valid: false },\n\t\t\t\tlowercase: { valid: false },\n\t\t\t\tnumber: { valid: false }\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tcodeButtonText() {\n\t\t\treturn this.countdown > 0 ? `${this.countdown}s后重发` : '发送验证码'\n\t\t}\n\t},\n\twatch: {\n\t\t'formData.newPassword'(newVal) {\n\t\t\tthis.checkPasswordTips(newVal)\n\t\t}\n\t},\n\tonLoad() {\n\t\tthis.getSystemInfo()\n\t},\n\tmethods: {\n\t\t// 获取系统信息\n\t\tgetSystemInfo() {\n\t\t\tconst systemInfo = uni.getSystemInfoSync()\n\t\t\tthis.statusBarHeight = systemInfo.statusBarHeight || 20\n\t\t},\n\t\t\n\t\t// 清除错误信息\n\t\tclearError(field) {\n\t\t\tif (this.errors[field]) {\n\t\t\t\tthis.errors[field] = ''\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 检查密码提示\n\t\tcheckPasswordTips(password) {\n\t\t\tthis.passwordTips = {\n\t\t\t\tlength: { valid: password.length >= 8 && password.length <= 18 },\n\t\t\t\tuppercase: { valid: /[A-Z]/.test(password) },\n\t\t\t\tlowercase: { valid: /[a-z]/.test(password) },\n\t\t\t\tnumber: { valid: /[0-9]/.test(password) }\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 验证学籍号\n\t\tasync verifyStudentId() {\n\t\t\tif (this.isVerifying) return\n\t\t\t\n\t\t\t// 表单验证\n\t\t\tif (!this.formData.studentId.trim()) {\n\t\t\t\tthis.errors.studentId = '请输入学籍号'\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\tthis.isVerifying = true\n\t\t\t\n\t\t\ttry {\n\t\t\t\t// 调用验证学籍号API\n\t\t\t\tconst params = {\n\t\t\t\t\tstudentId: this.formData.studentId.trim()\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst response = await getReq(URL.apiGetVerifStudentIDNumber, params)\n\t\t\t\tconsole.log('验证学籍号响应:', response)\n\t\t\t\t\n\t\t\t\tif (response && response.data) {\n\t\t\t\t\t// 验证成功，进入下一步\n\t\t\t\t\tthis.currentStep = 2\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error('学籍号不存在，请检查学籍号是否正确')\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('验证学籍号失败:', error)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: error.message || '验证失败，请检查网络连接',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.isVerifying = false\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 发送验证码\n\t\tasync sendVerificationCode() {\n\t\t\tif (!this.canSendCode) return\n\t\t\t\n\t\t\t// 验证手机号\n\t\t\tif (!this.formData.phone.trim()) {\n\t\t\t\tthis.errors.phone = '请输入手机号'\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (!/^1[3-9]\\d{9}$/.test(this.formData.phone.trim())) {\n\t\t\t\tthis.errors.phone = '请输入正确的手机号'\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\ttry {\n\t\t\t\t// 调用发送验证码API\n\t\t\t\tconst params = {\n\t\t\t\t\tphone: this.formData.phone.trim()\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst response = await getReq(URL.apiGetCAPTCHA, params)\n\t\t\t\tconsole.log('发送验证码响应:', response)\n\t\t\t\t\n\t\t\t\t// 开始倒计时\n\t\t\t\tthis.startCountdown()\n\t\t\t\t\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '验证码已发送',\n\t\t\t\t\ticon: 'success'\n\t\t\t\t})\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('发送验证码失败:', error)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: error.message || '发送失败，请重试',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 开始倒计时\n\t\tstartCountdown() {\n\t\t\tthis.canSendCode = false\n\t\t\tthis.countdown = 60\n\t\t\t\n\t\t\tconst timer = setInterval(() => {\n\t\t\t\tthis.countdown--\n\t\t\t\tif (this.countdown <= 0) {\n\t\t\t\t\tclearInterval(timer)\n\t\t\t\t\tthis.canSendCode = true\n\t\t\t\t}\n\t\t\t}, 1000)\n\t\t},\n\t\t\n\t\t// 验证手机号\n\t\tasync verifyPhone() {\n\t\t\tif (this.isVerifying) return\n\t\t\t\n\t\t\t// 表单验证\n\t\t\tif (!this.formData.phone.trim()) {\n\t\t\t\tthis.errors.phone = '请输入手机号'\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (!/^1[3-9]\\d{9}$/.test(this.formData.phone.trim())) {\n\t\t\t\tthis.errors.phone = '请输入正确的手机号'\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (!this.formData.verificationCode.trim()) {\n\t\t\t\tthis.errors.verificationCode = '请输入验证码'\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\tthis.isVerifying = true\n\t\t\t\n\t\t\ttry {\n\t\t\t\t// 这里可以调用验证手机号和验证码的API\n\t\t\t\t// 暂时模拟验证成功\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.currentStep = 3\n\t\t\t\t\tthis.isVerifying = false\n\t\t\t\t}, 1000)\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('验证手机号失败:', error)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: error.message || '验证失败，请检查网络连接',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\tthis.isVerifying = false\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 重置密码\n\t\tasync resetPassword() {\n\t\t\tif (this.isResetting) return\n\t\t\t\n\t\t\t// 表单验证\n\t\t\tif (!this.formData.newPassword.trim()) {\n\t\t\t\tthis.errors.newPassword = '请输入新密码'\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (!this.formData.confirmPassword.trim()) {\n\t\t\t\tthis.errors.confirmPassword = '请确认新密码'\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (this.formData.newPassword !== this.formData.confirmPassword) {\n\t\t\t\tthis.errors.confirmPassword = '两次输入的密码不一致'\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\t// 检查密码强度\n\t\t\tconst passwordValid = Object.values(this.passwordTips).every(tip => tip.valid)\n\t\t\tif (!passwordValid) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '密码强度不符合要求',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\tthis.isResetting = true\n\t\t\t\n\t\t\ttry {\n\t\t\t\t// 调用重置密码API\n\t\t\t\tconst params = {\n\t\t\t\t\tstudentId: this.formData.studentId.trim(),\n\t\t\t\t\tphone: this.formData.phone.trim(),\n\t\t\t\t\tverificationCode: this.formData.verificationCode.trim(),\n\t\t\t\t\tnewPassword: this.formData.newPassword.trim()\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 这里应该调用重置密码的API\n\t\t\t\t// const response = await postReq(URL.apiPostResetPassword, params)\n\t\t\t\t\n\t\t\t\t// 模拟重置成功\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '密码重置成功',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\t// 跳转到登录页面\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\turl: '/pages/students/login/index'\n\t\t\t\t\t\t})\n\t\t\t\t\t}, 1500)\n\t\t\t\t}, 1000)\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('重置密码失败:', error)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: error.message || '重置失败，请检查网络连接',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\tthis.isResetting = false\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 上一步\n\t\tprevStep() {\n\t\t\tif (this.currentStep > 1) {\n\t\t\t\tthis.currentStep--\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 跳转到登录页面\n\t\tgoToLogin() {\n\t\t\tuni.navigateBack()\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.forgot-password-container {\n\tmin-height: 100vh;\n\tbackground: #FFFFFF;\n\tposition: relative;\n}\n\n.top-background {\n\tposition: relative;\n\twidth: 100%;\n\theight: 500rpx;\n\toverflow: hidden;\n}\n\n.background-image {\n\twidth: 100%;\n\theight: 100%;\n}\n\n.status-bar {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tz-index: 10;\n\twidth: 100%;\n}\n\n.forgot-password-form-container {\n\tposition: relative;\n\tz-index: 5;\n\tmargin-top: -200rpx;\n\tbackground: #FFFFFF;\n\tborder-radius: 32rpx 32rpx 0 0;\n\tpadding: 60rpx 64rpx 100rpx;\n\tmin-height: calc(100vh - 300rpx);\n}\n\n.logo-section {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tmargin-bottom: 60rpx;\n}\n\n.logo-image {\n\twidth: 120rpx;\n\theight: 120rpx;\n\tmargin-bottom: 24rpx;\n}\n\n.app-title {\n\tfont-size: 48rpx;\n\tfont-weight: 600;\n\tcolor: #2C84FF;\n}\n\n.step-indicator {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-bottom: 60rpx;\n}\n\n.step-item {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tposition: relative;\n}\n\n.step-number {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tborder-radius: 50%;\n\tbackground: #E5E5E5;\n\tcolor: #999999;\n\tfont-size: 24rpx;\n\tfont-weight: 600;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-bottom: 12rpx;\n\ttransition: all 0.3s ease;\n}\n\n.step-item.active .step-number {\n\tbackground: #2C84FF;\n\tcolor: #FFFFFF;\n}\n\n.step-item.completed .step-number {\n\tbackground: #4CD964;\n\tcolor: #FFFFFF;\n}\n\n.step-text {\n\tfont-size: 24rpx;\n\tcolor: #999999;\n\ttransition: color 0.3s ease;\n}\n\n.step-item.active .step-text {\n\tcolor: #2C84FF;\n}\n\n.step-item.completed .step-text {\n\tcolor: #4CD964;\n}\n\n.step-line {\n\twidth: 80rpx;\n\theight: 4rpx;\n\tbackground: #E5E5E5;\n\tmargin: 0 20rpx;\n\ttransition: background 0.3s ease;\n}\n\n.step-line.active {\n\tbackground: #2C84FF;\n}\n\n.forgot-password-form {\n\twidth: 100%;\n}\n\n.form-step {\n\twidth: 100%;\n}\n\n.step-title {\n\tfont-size: 36rpx;\n\tfont-weight: 600;\n\tcolor: #333333;\n\ttext-align: center;\n\tmargin-bottom: 16rpx;\n}\n\n.step-desc {\n\tfont-size: 28rpx;\n\tcolor: #666666;\n\ttext-align: center;\n\tmargin-bottom: 60rpx;\n}\n\n.input-group {\n\tmargin-bottom: 40rpx;\n}\n\n.input-label {\n\tfont-size: 28rpx;\n\tcolor: #666666;\n\tmargin-bottom: 16rpx;\n}\n\n.input-wrapper {\n\tposition: relative;\n}\n\n.input-field {\n\twidth: 100%;\n\theight: 88rpx;\n\tpadding: 0 24rpx;\n\tborder: 2rpx solid #E5E5E5;\n\tborder-radius: 16rpx;\n\tfont-size: 32rpx;\n\tcolor: #333333;\n\tbackground: #FFFFFF;\n\tbox-sizing: border-box;\n\ttransition: border-color 0.3s ease;\n}\n\n.input-field:focus {\n\tborder-color: #2C84FF;\n}\n\n.input-field.error {\n\tborder-color: #FF4757;\n}\n\n.verification-wrapper {\n\tdisplay: flex;\n\tgap: 16rpx;\n}\n\n.verification-input {\n\tflex: 1;\n}\n\n.verification-btn {\n\twidth: 200rpx;\n\theight: 88rpx;\n\tbackground: #2C84FF;\n\tborder-radius: 16rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\ttransition: opacity 0.3s ease;\n}\n\n.verification-btn.disabled {\n\topacity: 0.6;\n}\n\n.verification-btn-text {\n\tfont-size: 28rpx;\n\tcolor: #FFFFFF;\n\tfont-weight: 500;\n}\n\n.error-message {\n\tfont-size: 24rpx;\n\tcolor: #FF4757;\n\tmargin-top: 8rpx;\n}\n\n.password-tips {\n\tmargin-bottom: 40rpx;\n}\n\n.tip-item {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-bottom: 12rpx;\n}\n\n.tip-item::before {\n\tcontent: '';\n\twidth: 24rpx;\n\theight: 24rpx;\n\tborder-radius: 50%;\n\tbackground: #E5E5E5;\n\tmargin-right: 12rpx;\n\ttransition: background 0.3s ease;\n}\n\n.tip-item.valid::before {\n\tbackground: #4CD964;\n}\n\n.tip-text {\n\tfont-size: 24rpx;\n\tcolor: #666666;\n}\n\n.tip-item.valid .tip-text {\n\tcolor: #4CD964;\n}\n\n.button-group {\n\tdisplay: flex;\n\tgap: 24rpx;\n\tmargin-bottom: 40rpx;\n}\n\n.prev-button {\n\tflex: 1;\n\theight: 88rpx;\n\tbackground: #F5F5F5;\n\tborder-radius: 16rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.prev-button-text {\n\tfont-size: 32rpx;\n\tcolor: #666666;\n\tfont-weight: 500;\n}\n\n.next-button {\n\tflex: 1;\n\theight: 88rpx;\n\tbackground: linear-gradient(135deg, #2C84FF 0%, #4A9EFF 100%);\n\tborder-radius: 16rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\ttransition: opacity 0.3s ease;\n}\n\n.next-button.disabled {\n\topacity: 0.6;\n}\n\n.next-button-text {\n\tfont-size: 32rpx;\n\tcolor: #FFFFFF;\n\tfont-weight: 600;\n}\n\n.login-link {\n\ttext-align: center;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tgap: 8rpx;\n}\n\n.login-text {\n\tfont-size: 28rpx;\n\tcolor: #999999;\n}\n\n.login-link-text {\n\tfont-size: 28rpx;\n\tcolor: #2C84FF;\n\tfont-weight: 500;\n}\n</style>\n","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=7f007ccf&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=7f007ccf&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7f007ccf\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/students/forgotPassword/index.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22[0].rules[0].use[0]!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[5]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=7f007ccf&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-22[0].rules[0].use[0]!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[1]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[3]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??clonedRuleSet-22[0].rules[0].use[4]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??clonedRuleSet-22[0].rules[0].use[5]!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=7f007ccf&lang=scss&scoped=true&\""],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","render","_vm","this","_h","$createElement","g0","_self","_c","currentStep","passwordTips","length","$mp","data","Object","assign","$root","staticRenderFns","_withStripped","recyclableRender","components","undefined","statusBarHeight","isVerifying","isResetting","canSendCode","countdown","formData","studentId","phone","verificationCode","newPassword","confirmPassword","errors","valid","uppercase","lowercase","number","computed","codeButtonText","watch","newVal","checkPasswordTips","onLoad","getSystemInfo","methods","systemInfo","uni","getSystemInfoSync","clearError","field","password","test","verifyStudentId","trim","params","response","getReq","URL","apiGetVerifStudentIDNumber","console","log","Error","error","showToast","title","message","icon","sendVerificationCode","apiGetCAPTCHA","startCountdown","timer","setInterval","clearInterval","verifyPhone","setTimeout","resetPassword","passwordValid","values","every","tip","reLaunch","url","prevStep","goToLogin","navigateBack","renderjs","component","options","__file"],"sourceRoot":""}